# 📋 Googleフォーム連携 - 画像付き設定ガイド

このガイドに従えば、**10分程度**でGoogleフォーム連携が完了します。

---

## 📌 準備するもの

- Googleアカウント
- Google Chrome または Edge ブラウザ
- 作成したフォームURL: https://docs.google.com/forms/d/1cAvRmsZqw0zffZZOAe7OU1-STeaaDTqiwDjE0WYq9R4/edit

---

## ステップ1: Googleフォームに質問を追加する

### 1-1. フォームを開く

以下のURLをクリックしてフォームを開いてください：
```
https://docs.google.com/forms/d/1cAvRmsZqw0zffZZOAe7OU1-STeaaDTqiwDjE0WYq9R4/edit
```

### 1-2. 質問を追加する

右側の「➕」ボタンをクリックして、以下の質問を**順番通りに**追加してください。

---

#### 質問1: 予約日時

```
質問タイプ: 記述式（短文回答）
質問文: 予約日時
必須: ✓ チェックを入れる
```

**設定方法：**
1. ➕ボタンをクリック
2. 「無題の質問」に `予約日時` と入力
3. 右側のプルダウンが「記述式」になっていることを確認
4. 右下の「必須」をオンにする

---

#### 質問2: 予約時間

```
質問タイプ: 記述式
質問文: 予約時間
必須: ✓ チェックを入れる
```

---

#### 質問3: 人数

```
質問タイプ: 記述式
質問文: 人数
必須: ✓ チェックを入れる
```

---

#### 質問4: コース

```
質問タイプ: 記述式
質問文: コース
必須: ✓ チェックを入れる
```

---

#### 質問5: お名前

```
質問タイプ: 記述式
質問文: お名前
必須: ✓ チェックを入れる
```

---

#### 質問6: フリガナ

```
質問タイプ: 記述式
質問文: フリガナ
必須: ✓ チェックを入れる
```

---

#### 質問7: メールアドレス

```
質問タイプ: 記述式
質問文: メールアドレス
必須: ✓ チェックを入れる
```

---

#### 質問8: 電話番号

```
質問タイプ: 記述式
質問文: 電話番号
必須: ✓ チェックを入れる
```

---

#### 質問9: ご要望・アレルギー

```
質問タイプ: 段落（長文回答）
質問文: ご要望・アレルギー
必須: ✗ チェックを入れない
```

**設定方法：**
1. ➕ボタンをクリック
2. 「無題の質問」に `ご要望・アレルギー` と入力
3. 右側のプルダウンを「段落」に変更
4. 必須はオフのまま

---

### 1-3. フォームを保存

すべての質問を追加したら、自動保存されます。

---

## ステップ2: entry IDを取得する

これが最も重要なステップです！

### 2-1. フォームのプレビューを開く

1. Googleフォーム編集画面の右上にある **👁（目のアイコン）** をクリック
2. 新しいタブでプレビューが開きます

### 2-2. 開発者ツールを開く

プレビュー画面で以下のいずれかの方法で開発者ツールを開きます：

**方法1: キーボードショートカット**
- Windows: `F12` キーを押す
- Mac: `Command + Option + I`

**方法2: 右クリックメニュー**
- ページ上で右クリック → 「検証」をクリック

### 2-3. Elementsタブを選択

開発者ツールの上部にある「**Elements**」タブをクリックします。

### 2-4. 各質問のentry IDを取得

以下の手順を**9つの質問すべて**に対して繰り返します：

1. プレビュー画面で、**質問1（予約日時）の入力欄**を右クリック
2. 「**検証**」をクリック
3. 開発者ツールに `<input>` タグがハイライトされます
4. その中に `name="entry.XXXXXXXXX"` という部分を探します
5. **entry.の後ろの数字**をメモします

**例：**
```html
<input type="text" name="entry.123456789" ...>
```
↑ この場合、`entry.123456789` をメモ

---

### 📝 entry IDメモ用テンプレート

以下のテンプレートに、取得したentry IDを記入してください：

```
質問1 - 予約日時: entry._________________
質問2 - 予約時間: entry._________________
質問3 - 人数: entry._________________
質問4 - コース: entry._________________
質問5 - お名前: entry._________________
質問6 - フリガナ: entry._________________
質問7 - メールアドレス: entry._________________
質問8 - 電話番号: entry._________________
質問9 - ご要望・アレルギー: entry._________________
```

**重要なヒント：**
- 質問9は `<textarea>` タグになります（inputではありません）
- でも同じように `name="entry.XXXXXXXXX"` が書かれています

---

## ステップ3: フォームIDを取得する

### 3-1. フォームのURLを確認

フォーム編集画面のURLを見てください：
```
https://docs.google.com/forms/d/1cAvRmsZqw0zffZZOAe7OU1-STeaaDTqiwDjE0WYq9R4/edit
```

### 3-2. フォームIDをコピー

`/d/` と `/edit` の間の文字列がフォームIDです：

```
1cAvRmsZqw0zffZZOAe7OU1-STeaaDTqiwDjE0WYq9R4
```

この文字列をコピーしてください。

---

## ステップ4: コードに設定する

### 4-1. reservation.jsを開く

VSCodeで以下のファイルを開きます：
```
simple-restaurant/js/reservation.js
```

### 4-2. 設定部分を編集

ファイルの最初の方にある `GOOGLE_FORM_CONFIG` を編集します：

**編集前：**
```javascript
const GOOGLE_FORM_CONFIG = {
    formId: '',  // 例: '1FAIpQLSc_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'
    entries: {
        date: 'entry.000000001',
        time: 'entry.000000002',
        guests: 'entry.000000003',
        course: 'entry.000000004',
        name: 'entry.000000005',
        nameKana: 'entry.000000006',
        email: 'entry.000000007',
        phone: 'entry.000000008',
        requests: 'entry.000000009'
    }
};
```

**編集後（例）：**
```javascript
const GOOGLE_FORM_CONFIG = {
    formId: '1cAvRmsZqw0zffZZOAe7OU1-STeaaDTqiwDjE0WYq9R4',  // ← ステップ3で取得
    entries: {
        date: 'entry.123456789',        // ← ステップ2で取得した実際の数字に置き換え
        time: 'entry.234567890',        // ← 実際の数字に置き換え
        guests: 'entry.345678901',      // ← 実際の数字に置き換え
        course: 'entry.456789012',      // ← 実際の数字に置き換え
        name: 'entry.567890123',        // ← 実際の数字に置き換え
        nameKana: 'entry.678901234',    // ← 実際の数字に置き換え
        email: 'entry.789012345',       // ← 実際の数字に置き換え
        phone: 'entry.890123456',       // ← 実際の数字に置き換え
        requests: 'entry.901234567'     // ← 実際の数字に置き換え
    }
};
```

### 4-3. 保存する

`Ctrl + S`（Mac: `Command + S`）で保存します。

---

## ステップ5: スプレッドシートとメール通知を設定

### 5-1. スプレッドシートを作成

1. Googleフォーム編集画面で「**回答**」タブをクリック
2. 右上の緑色の **スプレッドシートアイコン** をクリック
3. 「**新しいスプレッドシートを作成**」を選択
4. 「作成」をクリック

### 5-2. メール通知を設定

1. 作成されたスプレッドシートが開きます
2. メニューから「**ツール**」→「**通知ルール**」をクリック
3. 「**ユーザーがフォームを送信したとき**」を選択
4. 「**すぐに通知する**」を選択
5. 「**保存**」をクリック

これで、予約が入るたびにメールが届くようになります！

---

## ステップ6: テストする

### 6-1. 予約システムを開く

ブラウザで以下のファイルを開きます：
```
simple-restaurant/reservation.html
```

### 6-2. テスト予約を行う

1. カレンダーから日付を選択
2. 時間・人数・コースを選択
3. お客様情報を入力（テスト用の情報でOK）
4. 予約を確定

### 6-3. 結果を確認

以下を確認してください：

✅ **予約完了画面が表示される**
✅ **Googleスプレッドシートに予約データが記録される**
✅ **メールに通知が届く**

---

## 🎉 完了！

お疲れ様でした！これで予約システムとGoogleフォームの連携が完了しました。

---

## ❓ トラブルシューティング

### Q1. entry IDが見つからない

**A:** 開発者ツールで以下を確認してください：
1. Elementsタブが選択されているか
2. 入力欄を右クリック → 検証 で正しく選択されているか
3. `<input>` または `<textarea>` タグの中に `name="entry.XXXXX"` があるか

**探し方のコツ：**
- Ctrl+F（Mac: Command+F）で `entry.` を検索
- HTMLコードの中で `name=` の後ろに `entry.` が続く部分を探す

### Q2. スプレッドシートにデータが入らない

**A:** 以下を確認してください：
1. フォームIDが正しいか
2. entry IDがすべて正しいか
3. ブラウザのコンソール（F12 → Console）にエラーが出ていないか

### Q3. メール通知が届かない

**A:** 以下を確認してください：
1. スプレッドシートの通知ルールが正しく設定されているか
2. 迷惑メールフォルダを確認
3. Googleアカウントのメール設定を確認

---

## 📞 サポート

それでもうまくいかない場合は、以下の情報を教えてください：
- どのステップでつまずいているか
- エラーメッセージ（あれば）
- ブラウザのコンソールに表示されている内容

---

**作成日**: 2024年
**最終更新**: 2024年
